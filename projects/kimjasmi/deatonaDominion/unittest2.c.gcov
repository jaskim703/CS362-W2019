        -:    0:Source:unittest2.c
        -:    0:Graph:unittest2.gcno
        -:    0:Data:unittest2.gcda
        -:    0:Runs:1
        -:    0:Programs:1
        -:    1:/******************************************
        -:    2:* Author: Jasmine Kim
        -:    3:* Date: 2-6-19
        -:    4:* Assignment: unittest2.c tests the updateCoins
        -:    5:* function
        -:    6:********************************************/
        -:    7:
        -:    8:#include "dominion.h"
        -:    9:#include "dominion_helpers.h"
        -:   10:#include "rngs.h"
        -:   11:#include <string.h>
        -:   12:#include <stdio.h>
        -:   13:#include <math.h>
        -:   14:#include <stdlib.h>
        -:   15:#include <assert.h>
        -:   16:
        -:   17://Tests the updateCoins function
function main called 1 returned 100% blocks executed 80%
        1:   18:int main()
        -:   19:{
        -:   20:    int i;
        1:   21:    int numTest = 1;
        1:   22:    int seed = 1000;
        1:   23:    int numPlayer = 2;
        -:   24:    int bonus;
        1:   25:    int false = 0;
        1:   26:    int maxBonus = 10;
        -:   27:    struct gameState G;
        1:   28:    int k[10] = {adventurer, council_room, feast, gardens, mine,
        -:   29:                remodel, smithy, village, baron, great_hall};
        -:   30:
        -:   31:    int coppers[MAX_HAND];
        -:   32:    int silvers[MAX_HAND];
        -:   33:    int golds[MAX_HAND];
        -:   34:    int p, handCount;
        1:   35:    int maxHandCount = 5;
        -:   36:
        -:   37:    //Fills the array with the corresponding coins
      501:   38:    for(i = 0; i < MAX_HAND; i++)
branch  0 taken 99%
branch  1 taken 1% (fallthrough)
        -:   39:    {
      500:   40:        coppers[i] = copper;
      500:   41:        silvers[i] = silver;
      500:   42:        golds[i] = gold;
        -:   43:    }
        -:   44:
        1:   45:    printf("TESTING updateCoins():\n");
call    0 returned 100%
        -:   46:
        3:   47:    for(p = 0; p < numPlayer; p++)
branch  0 taken 67%
branch  1 taken 33% (fallthrough)
        -:   48:    {
       12:   49:        for(handCount = 1; handCount <= maxHandCount; handCount++)
branch  0 taken 83%
branch  1 taken 17% (fallthrough)
        -:   50:        {
      120:   51:            for(bonus = 0; bonus <= maxBonus; bonus++)
branch  0 taken 92%
branch  1 taken 8% (fallthrough)
        -:   52:            {
      110:   53:                printf("Test player %d with %d treasure card(s) and %d bonus.\n", p, handCount, bonus);
call    0 returned 100%
        -:   54:
      110:   55:                memset(&G, 23, sizeof(struct gameState));
      110:   56:                initializeGame(numPlayer, k, seed, &G);
call    0 returned 100%
      110:   57:                G.handCount[p] = handCount;
        -:   58:
      110:   59:                memcpy(G.hand[p], coppers, sizeof(int) * handCount); // set all the cards to copper
      110:   60:                updateCoins(p, &G, bonus);
call    0 returned 100%
        -:   61:		//Tests for count of copper coins
      110:   62:                if(G.coins == handCount * 1 + bonus)  //acts as our assert function
branch  0 taken 100% (fallthrough)
branch  1 taken 0%
        -:   63:                {
      110:   64:                    printf("Test %d passed! G.coins = %d, expected: %d\n", numTest++, G.coins, handCount * 1 + bonus);
call    0 returned 100%
        -:   65:                }
        -:   66:                else
        -:   67:                {
    #####:   68:                    printf("Test %d failed! G.coins = %d, expected: %d\n", numTest++, G.coins, handCount * 1 + bonus);
call    0 never executed
    #####:   69:                    false = 1;
        -:   70:                }
        -:   71:
      110:   72:                memcpy(G.hand[p], silvers, sizeof(int) * handCount); // set all the cards to silver
      110:   73:                updateCoins(p, &G, bonus);
call    0 returned 100%
        -:   74:		//Tests for count of silver coins
      110:   75:                if(G.coins == handCount * 2 + bonus)  //acts as our assert function
branch  0 taken 100% (fallthrough)
branch  1 taken 0%
        -:   76:                {
      110:   77:                    printf("Test %d passed! G.coins = %d, expected: %d\n", numTest++, G.coins, handCount * 2 + bonus);
call    0 returned 100%
        -:   78:                }
        -:   79:                else
        -:   80:                {
    #####:   81:                    printf("Test %d failed! G.coins = %d, expected: %d\n", numTest++, G.coins, handCount * 2 + bonus);
call    0 never executed
    #####:   82:                    false = 1;
        -:   83:                }
        -:   84:
      110:   85:                memcpy(G.hand[p], golds, sizeof(int) * handCount); // set all the cards to gold
      110:   86:                updateCoins(p, &G, bonus);
call    0 returned 100%
        -:   87:		//Tests for count of gold coins
      110:   88:                if(G.coins == handCount * 3 + bonus)  //acts as our assert function
branch  0 taken 100% (fallthrough)
branch  1 taken 0%
        -:   89:                {
      110:   90:                    printf("Test %d passed! G.coins = %d, expected: %d\n", numTest++, G.coins, handCount * 3 + bonus);
call    0 returned 100%
        -:   91:                }
        -:   92:                else
        -:   93:                {
    #####:   94:                    printf("Test %d failed! G.coins = %d, expected: %d\n", numTest++, G.coins, handCount * 3 + bonus);
call    0 never executed
    #####:   95:                    false = 1;
        -:   96:                }
        -:   97:            }
        -:   98:        }
        -:   99:    }
        -:  100:
        1:  101:    if(false == 0)
branch  0 taken 100% (fallthrough)
branch  1 taken 0%
        -:  102:    {
        1:  103:        printf("All tests passed!\n");
call    0 returned 100%
        -:  104:    }
        -:  105:    else
        -:  106:    {
    #####:  107:        printf("Tests failed. Please review.\n");
call    0 never executed
        -:  108:    }
        1:  109:    return 0;
        -:  110:}
